(this["webpackJsonprodeo-de"]=this["webpackJsonprodeo-de"]||[]).push([[0],{105:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(9),i=t.n(l),o=(t(105),t(154)),c=t(188),s=t(12),u=t(43),d=t(52),m=t(30),f=t(33),v=t(78),p="SET_SELECTED_DEVICE",E="SET_ALL_DEVICE",g="SET_FILTERED_DEVICE",h="SET_ALL_ANIMALS",b="SET_LOADING",j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;return a.type===p?a.payload:e},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return a.type===E?a.payload:e},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return a.type===g?a.payload:e},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return a.type===h?a.payload:e},x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1?arguments[1]:void 0;return a.type===b?a.payload:e},k=Object(m.a)();var N=t(11),S=t.n(N),C=t(25),D=t(17),L=t(157),I=t(159),R=t(36),A=t(161),_=t(160),T=t(19),B=t(84),P=t.n(B),z=Object(o.a)((function(e){return Object(c.a)({root:{flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));function G(){var e=z(),a=Object(n.useState)(null),t=Object(D.a)(a,2),l=t[0],i=t[1];Object(n.useEffect)((function(){(function(){var e=Object(C.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.ipcRenderer.invoke("profile");case 2:a=e.sent,i(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var o=function(){var e=Object(C.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(a=new T.remote.BrowserWindow({show:!1}))||void 0===a||a.loadURL("https://dev-ktt11zj0.eu.auth0.com/v2/logout"),a.on("ready-to-show",Object(C.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.close(),e.next=3,T.ipcRenderer.invoke("logout");case 3:T.remote.getCurrentWindow().close();case 4:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(L.a,{position:"fixed",className:e.appBar},r.a.createElement(I.a,null,r.a.createElement(_.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(P.a,null)),r.a.createElement(R.a,{variant:"h6",className:e.title},"Rodeo Desktop Edition - ",null===l||void 0===l?void 0:l.name),r.a.createElement(A.a,{color:"inherit",onClick:o},"Logout")))}var W=t(162),H=t(163),V=t(187),F=t(164),J=t(165),M=t(166),q=t(167),U=function(e){return{type:g,payload:e}},K=function(e){return{type:h,payload:e}},Q=function(e){return{type:b,payload:e}},X=Object(o.a)((function(e){return Object(c.a)({root:{flexGrow:1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)},loader:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})})),Y=function(e){var a=e.children,t=Object(s.d)();Object(n.useEffect)((function(){(function(){var e=Object(C.a)(S.a.mark((function e(){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.ipcRenderer.invoke("getAnimals");case 2:a=e.sent,n=a.animals,t(K(n.items));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var l=function(){var e=Object(C.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.ipcRenderer.invoke("accessToken");case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=X(),o=Object(s.e)((function(e){return e.loading}));return r.a.createElement("div",{className:i.root},r.a.createElement(G,null),r.a.createElement(W.a,null),r.a.createElement(H.a,{container:!0,justify:"flex-start",spacing:0},r.a.createElement(H.a,{item:!0,sm:2},r.a.createElement(V.a,{className:i.drawer,variant:"permanent",classes:{paper:i.drawerPaper},anchor:"left"},r.a.createElement("div",{className:i.drawerContainer},r.a.createElement(I.a,null),r.a.createElement(F.a,null,["\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430","\u0421\u0435\u0441\u0438\u0438","\u0415\u043a\u0441\u043f\u043e\u0440\u0442"].map((function(e,a){return r.a.createElement(J.a,{button:!0,key:e,onClick:l},r.a.createElement(M.a,{primary:e}))})))))),r.a.createElement(H.a,{sm:8},r.a.createElement("main",{className:i.content},r.a.createElement(I.a,null),o&&r.a.createElement(q.a,{className:i.loader,size:40}),a))))},Z=t(21),$=t(177),ee=t(179),ae=t(180),te=t(181),ne=t(64),re=t(88),le=t.n(re),ie=t(89),oe=t.n(ie),ce=t(178),se=t(168),ue=t.p+"static/media/tw3.100e2220.jpg",de=t.p+"static/media/hr.f8cc007b.jpg",me=t(18),fe=t(75),ve=t(170),pe=t(174),Ee=t(173),ge=t(169),he=t(171),be=t(172),je=t(91),ye=t(185),Oe=t(184),we=t(85),xe=t.n(we),ke=t(86),Ne=t.n(ke),Se=t(87),Ce=t.n(Se),De=t(65),Le=Object(o.a)((function(e){return Object(c.a)({sessions:{marginTop:20},divider:{marginBottom:20},root:{width:"100%"},container:{maxHeight:700}})})),Ie=function(){var e=Le(),a=Object(n.useState)([]),t=Object(D.a)(a,2),l=t[0],i=t[1],o=Object(n.useState)(0),c=Object(D.a)(o,2),u=c[0],d=c[1],m=Object(n.useState)(10),f=Object(D.a)(m,2),v=f[0],p=f[1],E=Object(s.e)((function(e){return e.device})),g=function(){var e=Object(C.a)(S.a.mark((function e(a){var t,n,r,l,o,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.ipcRenderer.invoke("loadSessions",a);case 2:return r=e.sent,e.next=5,T.ipcRenderer.invoke("weightSessions");case 5:l=e.sent,o=l.weightSessions,c=null===(t=r["ads:body"])||void 0===t||null===(n=t["ads:sessions"])||void 0===n?void 0:n["ads:session"],s=null===c||void 0===c?void 0:c.map((function(e){var a,t=null===o||void 0===o||null===(a=o.items)||void 0===a?void 0:a.find((function(a){return a.gallagherSessionID===e["ads:session_id"]}));return Object(fe.a)(Object(fe.a)({},e),{},Object(me.a)({},"ads:sync",!!t))})),i(s);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){E&&g(E.ipAddress)}),[E]);var h=Object(s.d)(),b=Object(s.e)((function(e){return e.allAnimals})),j=function(){var e=Object(C.a)(S.a.mark((function e(a){var t,n,r,l,i,o,c,s,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(Q(!0)),e.next=3,T.ipcRenderer.invoke("loadSessionById",{sessionId:a["ads:session_id"],url:E.ipAddress});case 3:return l=e.sent,i=null===(t=l["ads:body"])||void 0===t||null===(n=t["ads:sessions"])||void 0===n?void 0:n["ads:session"],o=null===(r=i["ads:animals"])||void 0===r?void 0:r["ads:animal"],c=null===o||void 0===o?void 0:o.filter((function(e){var a=b.find((function(a){var t,n,r;return(null===(t=a.lId)||void 0===t?void 0:t.toLocaleLowerCase())===(null===e||void 0===e||null===(n=e["ads:animalId"])||void 0===n||null===(r=n["ads:tag"])||void 0===r?void 0:r.toLocaleLowerCase())}));return e.rodeoAnimalId=null===a||void 0===a?void 0:a.animalId,!!a})),s={gallagherSessionID:a["ads:session_id"],sessionName:a["ads:name"],sessionDate:a["ads:startDate"],animalWeights:(null===c||void 0===c?void 0:c.map((function(e){var a;return{weight:null===(a=e["ads:weight"])||void 0===a?void 0:a["ads:value"],dateWeight:e["ads:datetime"],animalID:e.rodeoAnimalId}})))||[]},console.log(s),e.next=12,T.ipcRenderer.invoke("syncSession",s);case 12:return u=e.sent,console.log(u),e.next=16,g(E.ipAddress);case 16:h(Q(!1));case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return l.length>0?r.a.createElement("div",{className:e.sessions},r.a.createElement("h2",null,"\u0421\u0435\u0441\u0438\u0438"),r.a.createElement("p",null,"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u0441\u0435\u0441\u0438\u0438\u0442\u0435 \u0432 \u0441\u0432\u044a\u0440\u0437\u0430\u043d\u043e\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e"),r.a.createElement(se.a,{className:e.divider}),r.a.createElement(je.a,{className:e.root},r.a.createElement(ge.a,{className:e.container},r.a.createElement(ve.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(he.a,null,r.a.createElement(be.a,null,[{field:"id",headerName:"",align:"right"},{field:"deviceName",headerName:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e",align:"right"},{field:"dateOfSession",headerName:"\u0414\u0430\u0442\u0430 \u043d\u0430 \u0441\u0435\u0441\u0438\u044f",align:"right"},{field:"animalCount",headerName:"\u0411\u0440\u043e\u0439 \u0436\u0438\u0432\u043e\u0442\u043d\u0438",align:"center"},{field:"sync",headerName:"\u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u0430\u043d\u0430",align:"center"},{field:"id",headerName:"",align:"center"}].map((function(e){return r.a.createElement(Ee.a,{key:e.field,align:"center"},e.headerName)})))),r.a.createElement(pe.a,null,l.slice(u*v,u*v+v).map((function(e){var a,t,n;return r.a.createElement(be.a,{title:e["ads:session_id"],key:e["ads:session_id"]},r.a.createElement(Ee.a,{padding:"checkbox"},r.a.createElement(ye.a,{inputProps:{"aria-label":"select all desserts"}})),r.a.createElement(Ee.a,{align:"center"},e["ads:name"]),r.a.createElement(Ee.a,{align:"center"},null===(a=new Date(e["ads:startDate"]))||void 0===a?void 0:a.toDateString()),r.a.createElement(Ee.a,{align:"center"},null===(t=e["ads:animals"])||void 0===t||null===(n=t["ads:attributes"])||void 0===n?void 0:n["ads:count"]),r.a.createElement(Ee.a,{align:"center"},e["ads:sync"]?r.a.createElement(xe.a,{style:{color:De.a[500]}}):r.a.createElement(Ne.a,{style:{color:ne.a[500]}})),r.a.createElement(Ee.a,{align:"center"},!e["ads:sync"]&&r.a.createElement(_.a,{"aria-label":"sync",title:"\u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u0430\u0439 \u0441 \u0420\u043e\u0434\u0435\u043e",onClick:function(){return j(e)}},r.a.createElement(Ce.a,null))))}))))),r.a.createElement(Oe.a,{rowsPerPageOptions:[10,25,100],component:"div",count:l.length,rowsPerPage:v,page:u,onChangePage:function(e,a){d(a)},onChangeRowsPerPage:function(e){p(+e.target.value),d(0)}}))):null},Re=t(186),Ae=Object(o.a)((function(e){return Object(c.a)({searchSessions:{marginBottom:20}})})),_e=function(){var e=Object(s.e)((function(e){return e.allDevices})),a=Object(s.e)((function(e){return e.filteredDevices})),t=Ae().searchSessions,n=Object(s.d)();return r.a.createElement("div",{className:t},r.a.createElement("h3",null,"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 ( ",null===a||void 0===a?void 0:a.length," )"),r.a.createElement(Re.a,{label:"\u0422\u044a\u0440\u0441\u0435\u043d\u0435",onChange:function(a){var t=a.target.value?e.filter((function(e){var t,n,r,l;return null===e||void 0===e||null===(t=e.name)||void 0===t||null===(n=t.toLocaleLowerCase())||void 0===n?void 0:n.includes(null===(r=a.target)||void 0===r||null===(l=r.value)||void 0===l?void 0:l.toLocaleLowerCase())})):e;n(U(Object(Z.a)(t)))}}))},Te=Object(o.a)((function(e){return{root:{flexGrow:1},topRoot:{marginBottom:20},media:{height:150,width:170,marginLeft:35},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:ne.a[500]}}})),Be="TW3",Pe=function(){var e=Object(s.e)((function(e){return e.filteredDevices})),a=Object(s.d)(),t=function(){var e=Object(C.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.ipcRenderer.invoke("loadDevices");case 2:t=e.sent,console.log(t),a((n=Object(Z.a)(t),{type:E,payload:n})),a(U(Object(Z.a)(t)));case 6:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){t()}),[]);var l=Te();return r.a.createElement(H.a,{container:!0,justify:"center"},r.a.createElement(H.a,{item:!0,sm:10},r.a.createElement(_e,null)),r.a.createElement(H.a,{item:!0,sm:10,className:l.topRoot},r.a.createElement(H.a,{container:!0,className:l.root,justify:"flex-start",spacing:2},e.map((function(e){return r.a.createElement(H.a,{item:!0,container:!0,sm:4},r.a.createElement($.a,{className:l.root,key:e.name,onClick:function(){a(function(e){return{type:p,payload:e}}(e))}},r.a.createElement(ce.a,null,r.a.createElement(ee.a,null),r.a.createElement("img",{className:l.media,src:e.type===Be?ue:de,alt:""}),r.a.createElement(ae.a,null,r.a.createElement("h2",null,e.type===Be?"\u041a\u0430\u043d\u0442\u0430\u0440":"\u0427\u0435\u0442\u0435\u0446"),r.a.createElement("h1",null,e.name),r.a.createElement("h3",null,e.ipAddress),r.a.createElement("p",null,"\u0421\u0432\u044a\u0440\u0437\u0432\u0430\u043d\u0435 \u0441 \u043a\u0430\u043d\u0442\u0430\u0440\u043d\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e")),r.a.createElement(te.a,{disableSpacing:!0},r.a.createElement(_.a,{"aria-label":"add to favorites",onClick:t},r.a.createElement(le.a,null)),r.a.createElement(_.a,{"aria-label":"share"},r.a.createElement(oe.a,null))))))})))),r.a.createElement(se.a,null),r.a.createElement(H.a,{item:!0,sm:10},r.a.createElement(H.a,{item:!0},r.a.createElement(Ie,null))))},ze=(Object(o.a)((function(e){return Object(c.a)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}})})),function(e){var a;return Object(f.e)((a=k,Object(f.c)({router:Object(d.b)(a),device:j,allDevices:y,allAnimals:w,filteredDevices:O,loading:x})),e,Object(f.d)(Object(f.a)(Object(v.a)(k))))}({})),Ge=function(){return r.a.createElement(Y,null,r.a.createElement(Pe,null))},We=function(){return r.a.createElement(s.a,{store:ze},r.a.createElement(d.a,{history:k},r.a.createElement(r.a.Fragment,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/*",render:function(){return r.a.createElement(Ge,null)}})))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(We,null)),document.getElementById("root"))},19:function(e,a){e.exports=require("electron")}},[[113,1,2]]]);
//# sourceMappingURL=main.42fe5840.chunk.js.map